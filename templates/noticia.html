{% extends "home.html" %}
{% block noticias %}
<section class="pagina-noticia">
    <div class="container">
        <div class="row">
            <h2 class="titulo text-center mt-5 mb-4">{{ noticia['titulo'] }}</h2>

            <div class="col-12 text-center mb-3">
                <img src="{{ url_for('static', filename='imgs/' ~ noticia['img']) if noticia['img'] else 'https://picsum.photos/1200/500' }}"
                    alt="{{ noticia['titulo'] }}" class="imagem">
            </div>

            <div class="col-12 text-center mb-4">
                <p><strong>Categoria:</strong> {{ noticia['categoria'] or 'Sem categoria' }}</p>
                <p><i class="fa-regular fa-eye"></i> {{ noticia['views'] }} visualizações</p>
                <p><small>Data: {{ noticia['dataN'].strftime('%d/%m/%Y') if noticia['dataN'] else '—' }}</small></p>
            </div>

            <div class="col-12 mt-3">
                <p>{{ noticia['descricao'] }}</p>
            </div>
        </div>
    </div>
</section>

<section class="comentarios mt-5 mb-5">
    <div class="container">
        <h3 class="text-center mb-4">Comentários</h3>

        <form method="post" class="form-comentario">
            <input type="text" name="autor" placeholder="Seu nome" class="form-control mb-2" required>
            <textarea name="comentario" placeholder="Escreva seu comentário..." rows="3" class="form-control mb-2" required></textarea>
            <button type="submit" class="btn btn-primary">Enviar</button>
        </form>

        <div class="lista-comentarios mt-4">
            {% if comentarios %}
                {% for c in comentarios %}
                    <div class="comentario border rounded p-3 mb-3 bg-light">
                        <strong>{{ c.autor }}</strong>
                        <p class="mb-0">{{ c.comentario }}</p>
                    </div>
                {% endfor %}
            {% else %}
                <p class="text-center text-muted mt-3">Nenhum comentário ainda. Seja o primeiro a comentar!</p>
            {% endif %}
        </div>
    </div>
</section>

{% endblock %}